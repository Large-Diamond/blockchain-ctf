// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.20;

import "forge-std/Test.sol";
import "./challenge/Setup.sol";
import "./Exploit.sol";

contract ExploitTest is Test {
    address playerAddr = makeAddr("player");
    Setup setup;

    function setUp() public {
        setup = new Setup{value: 100 ether}();
        vm.deal(playerAddr, 5000 ether);
    }

    function test() public {
        vm.startPrank(playerAddr, playerAddr);
        new Exploit{value: 100 ether}().exploit(address(setup.wallet()));
        vm.stopPrank();
        assertTrue(setup.isSolved(), "Challenge is not complete");
    }
}
