// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "forge-std/Script.sol";
import "./challenge/Setup.sol";
import "./BabysandboxExploit.sol";

contract BabysandboxExploitTestScript is Script {
    function run() public {
        address setupAddress = vm.addr(uint256(vm.envBytes32("PRIVATE_KEY_SETUP")));
        address playerAddress = vm.addr(uint256(vm.envBytes32("PRIVATE_KEY_PLAYER")));

        vm.startBroadcast(setupAddress);
        Setup setup = new Setup();
        vm.stopBroadcast();

        vm.startBroadcast(playerAddress);
        BabysandboxExploit exploit = new BabysandboxExploit();
        setup.sandbox().run(address(exploit));
        vm.stopBroadcast();
    }
}
